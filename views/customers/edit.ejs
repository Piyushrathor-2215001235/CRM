<%- include('../partials/header') %>

<div class="container">
    <h1>Edit Customer: <%= customer.name %></h1>
    <% if (typeof error !== 'undefined') { %>
        <p class="error"><%= error %></p>
    <% } %>
    <form action="/customers/<%= customer._id %>?_method=PUT" method="POST">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" value="<%= customer.name %>" required>
        
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" value="<%= customer.email %>" required>
        
        <label for="phone">Phone:</label>
        <input type="text" id="phone" name="phone" value="<%= customer.phone %>">
        
        <label for="company">Company:</label>
        <input type="text" id="company" name="company" value="<%= customer.company %>">
        
        <label for="address">Address:</label>
        <input type="text" id="address" name="address" value="<%= customer.address %>">
        
        <label for="status">Status:</label>
        <select id="status" name="status">
            <option value="Active" <%= customer.status === 'Active' ? 'selected' : '' %>>Active</option>
            <option value="Inactive" <%= customer.status === 'Inactive' ? 'selected' : '' %>>Inactive</option>
        </select>
        
        <label for="assignedTo">Assigned To:</label>
        <select id="assignedTo" name="assignedTo">
            <option value="">Unassigned</option>
            <% users.forEach(function(user) { %>
                <option value="<%= user._id %>" <%= String(customer.assignedTo) === String(user._id) ? 'selected' : '' %>>
                    <%= user.name %>
                </option>
            <% }) %>
        </select>
        
        <button type="submit">Update Customer</button>
    </form>
    <a href="/customers">Back to Customers List</a>
</div>

<%- include('../partials/footer') %> 