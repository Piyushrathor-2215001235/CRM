<%- include('../partials/header') %>

<div class="container">
    <h1>Edit Lead: <%= lead.name %></h1>
    <% if (typeof error !== 'undefined') { %>
        <p class="error"><%= error %></p>
    <% } %>
    <form action="/leads/<%= lead._id %>?_method=PUT" method="POST">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" value="<%= lead.name %>" required>
        
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" value="<%= lead.email %>" required>
        
        <label for="phone">Phone:</label>
        <input type="text" id="phone" name="phone" value="<%= lead.phone %>">
        
        <label for="source">Source:</label>
        <input type="text" id="source" name="source" value="<%= lead.source %>">
        
        <label for="status">Status:</label>
        <select id="status" name="status">
            <option value="New" <%= lead.status === 'New' ? 'selected' : '' %>>New</option>
            <option value="Contacted" <%= lead.status === 'Contacted' ? 'selected' : '' %>>Contacted</option>
            <option value="Negotiated" <%= lead.status === 'Negotiated' ? 'selected' : '' %>>Negotiated</option>
            <option value="Converted" <%= lead.status === 'Converted' ? 'selected' : '' %>>Converted</option>
            <option value="Lost" <%= lead.status === 'Lost' ? 'selected' : '' %>>Lost</option>
        </select>
        
        <label for="assignedTo">Assigned To:</label>
        <select id="assignedTo" name="assignedTo">
            <option value="">Unassigned</option>
            <% users.forEach(function(user) { %>
                <option value="<%= user._id %>" <%= String(lead.assignedTo) === String(user._id) ? 'selected' : '' %>>
                    <%= user.name %>
                </option>
            <% }) %>
        </select>
        
        <label for="notes">Notes:</label>
        <textarea id="notes" name="notes"><%= lead.notes %></textarea>
        
        <button type="submit">Update Lead</button>
    </form>
    <a href="/leads">Back to Leads List</a>
</div>

<%- include('../partials/footer') %> 